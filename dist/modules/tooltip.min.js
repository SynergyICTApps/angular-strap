/**
 * angular-strap
 * @version v2.1.7 - 2015-10-19
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"use strict";angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$tooltip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(e,n,o,i,a,l,r,s,u,c,f){function p(e,i){function a(){U.$emit(K.prefixEvent+".show",A)}function l(){return U.$emit(K.prefixEvent+".hide",A),R&&"focus"===K.trigger?e[0].blur():void F()}function p(){var t=K.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",A.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",A.enter),e.on("hover"===t?"mouseleave":"blur",A.leave),"button"===P&&"hover"!==t&&e.on($?"touchstart":"mousedown",A.$onFocusElementMouseDown))})}function w(){for(var t=K.trigger.split(" "),n=t.length;n--;){var o=t[n];"click"===o?e.off("click",A.toggle):"manual"!==o&&(e.off("hover"===o?"mouseenter":"focus",A.enter),e.off("hover"===o?"mouseleave":"blur",A.leave),"button"===P&&"hover"!==o&&e.off($?"touchstart":"mousedown",A.$onFocusElementMouseDown))}}function y(){"focus"!==K.trigger?q.on("keyup",A.$onKeyUp):e.on("keyup",A.$onFocusKeyUp)}function k(){"focus"!==K.trigger?q.off("keyup",A.$onKeyUp):e.off("keyup",A.$onFocusKeyUp)}function E(){f(function(){q.on("click",S),v.on("click",A.hide),W=!0},0,!1)}function C(){W&&(q.off("click",S),v.off("click",A.hide),W=!1)}function S(t){t.stopPropagation()}function x(t){t=t||K.target||e;var n=t[0],o=n.getBoundingClientRect();null===o.width&&(o=angular.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var i;return i="body"===K.container?u.offset(n):u.position(n),angular.extend({},o,i)}function D(t,e,n,o){var i,a=t.split("-");switch(a[0]){case"right":i={top:e.top+e.height/2-o/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"left":i={top:e.top+e.height/2-o/2,left:e.left-n};break;default:i={top:e.top-o,left:e.left+e.width/2-n/2}}if(!a[1])return i;if("top"===a[0]||"bottom"===a[0])switch(a[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-n}else if("left"===a[0]||"right"===a[0])switch(a[1]){case"top":i.top=e.top-o;break;case"bottom":i.top=e.top+e.height}return i}function T(t,e){q.css({top:t+"px",left:e+"px"})}function F(){clearTimeout(H),A.$isShown&&null!==q&&(K.autoClose&&C(),K.keyboard&&k()),B&&(B.$destroy(),B=null),q&&(q.remove(),q=A.$element=null)}var A={},P=e[0].nodeName.toLowerCase(),K=A.$options=angular.extend({},t,i);A.$promise=g(K.template);var U=A.$scope=K.scope&&K.scope.$new()||n.$new();if(K.delay&&angular.isString(K.delay)){var O=K.delay.split(",").map(parseFloat);K.delay=O.length>1?{show:O[0],hide:O[1]}:O[0]}K.title&&(U.title=s.trustAsHtml(K.title)),U.$setEnabled=function(t){U.$$postDigest(function(){A.setEnabled(t)})},U.$hide=function(){U.$$postDigest(function(){A.hide()})},U.$show=function(){U.$$postDigest(function(){A.show()})},U.$toggle=function(){U.$$postDigest(function(){A.toggle()})},A.$isShown=U.$isShown=!1;var H,M;K.contentTemplate&&(A.$promise=A.$promise.then(function(t){var e=angular.element(t);return g(K.contentTemplate).then(function(t){var n=d('[ng-bind="content"]',e[0]);return n.length||(n=d('[ng-bind="title"]',e[0])),n.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var j,q,L,N,B;A.$promise.then(function(t){angular.isObject(t)&&(t=t.data),K.html&&(t=t.replace(b,'ng-bind-html="')),t=m.apply(t),L=t,j=o(t),A.init()}),A.init=function(){K.delay&&angular.isNumber(K.delay)&&(K.delay={show:K.delay,hide:K.delay}),"self"===K.container?N=e:angular.isElement(K.container)?N=K.container:K.container&&(N=d(K.container)),p(),K.target&&(K.target=angular.isElement(K.target)?K.target:d(K.target)),K.show&&U.$$postDigest(function(){"focus"===K.trigger?e[0].focus():A.show()})},A.destroy=function(){w(),F(),U.$destroy()},A.enter=function(){return clearTimeout(H),M="in",K.delay&&K.delay.show?void(H=setTimeout(function(){"in"===M&&A.show()},K.delay.show)):A.show()},A.show=function(){if(K.bsEnabled){U.$emit(K.prefixEvent+".show.before",A);var t,n;K.container?(t=N,n=N[0].lastChild?angular.element(N[0].lastChild):null):(t=null,n=e),q&&F(),B=A.$scope.$new(),q=A.$element=j(B,function(t,e){}),q.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}),K.animation&&q.addClass(K.animation),K.type&&q.addClass(K.prefixClass+"-"+K.type),K.customClass&&q.addClass(K.customClass);var o=r.enter(q,t,n,a);o&&o.then&&o.then(a),A.$isShown=U.$isShown=!0,h(U),c(function(){A.$applyPlacement(),q&&q.css({visibility:"visible"})}),K.keyboard&&("focus"!==K.trigger&&A.focus(),y()),K.autoClose&&E()}},A.leave=function(){return clearTimeout(H),M="out",K.delay&&K.delay.hide?void(H=setTimeout(function(){"out"===M&&A.hide()},K.delay.hide)):A.hide()};var R;A.hide=function(t){if(A.$isShown){U.$emit(K.prefixEvent+".hide.before",A),R=t;var e=r.leave(q,l);e&&e.then&&e.then(l),A.$isShown=U.$isShown=!1,h(U),K.keyboard&&null!==q&&k(),K.autoClose&&null!==q&&C()}},A.toggle=function(){A.$isShown?A.leave():A.enter()},A.focus=function(){q[0].focus()},A.setEnabled=function(t){K.bsEnabled=t},A.$applyPlacement=function(){if(q){var n=K.placement,o=/\s?auto?\s?/i,i=o.test(n);i&&(n=n.replace(o,"")||t.placement),q.addClass(K.placement);var a=x(),l=q.prop("offsetWidth"),r=q.prop("offsetHeight");if(i){var s=n,u=K.container?angular.element(document.querySelector(K.container)):e.parent(),c=x(u);s.indexOf("bottom")>=0&&a.bottom+r>c.bottom?n=s.replace("bottom","top"):s.indexOf("top")>=0&&a.top-r<c.top&&(n=s.replace("top","bottom")),("right"===s||"bottom-left"===s||"top-left"===s)&&a.right+l>c.width?n="right"===s?"left":n.replace("left","right"):("left"===s||"bottom-right"===s||"top-right"===s)&&a.left-l<c.left&&(n="left"===s?"right":n.replace("right","left")),q.removeClass(s).addClass(n)}var f=D(n,a,l,r);T(f.top,f.left)}},A.$onKeyUp=function(t){27===t.which&&A.$isShown&&(A.hide(),t.stopPropagation())},A.$onFocusKeyUp=function(t){27===t.which&&(e[0].blur(),t.stopPropagation())},A.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),A.$isShown?e[0].blur():e[0].focus()};var W=!1;return A}function h(t){t.$$phase||t.$root&&t.$root.$$phase||t.$digest()}function d(t,e){return angular.element((e||document).querySelectorAll(t))}function g(t){return w[t]?w[t]:w[t]=i.when(a.get(t)||l.get(t)).then(function(e){return angular.isObject(e)?(a.put(t,e.data),e.data):e})}var m=String.prototype.trim,$="createTouch"in e.document,b=/ng-bind="/gi,v=angular.element(e.document),w={};return p}]}).directive("bsTooltip",["$window","$location","$sce","$tooltip","$$rAF",function(t,e,n,o,i){return{restrict:"EAC",scope:!0,link:function(t,e,a,l){var r={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","backdropAnimation","type","customClass"],function(t){angular.isDefined(a[t])&&(r[t]=a[t])}),t.title||(t.title=""),a.$observe("title",function(e){if(angular.isDefined(e)||!t.title){var o=t.title;t.title=n.trustAsHtml(e),angular.isDefined(o)&&i(function(){s&&s.$applyPlacement()})}}),a.bsTooltip&&t.$watch(a.bsTooltip,function(e,n){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(n)&&i(function(){s&&s.$applyPlacement()})},!0),a.bsShow&&t.$watch(a.bsShow,function(t,e){s&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?s.show():s.hide())}),a.bsEnabled&&t.$watch(a.bsEnabled,function(t,e){s&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),t===!1?s.setEnabled(!1):s.setEnabled(!0))});var s=o(e,r);t.$on("$destroy",function(){s&&s.destroy(),r=null,s=null})}}}]);
//# sourceMappingURL=tooltip.min.js.map
